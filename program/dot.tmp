digraph p_Sensor {
size="8,10";
  GT [shape=box,style=dotted,label="Sensor"];
  GT -> S11;
	S11 -> S8  [color=black,style=solid,label="(1)"];
	S8 -> S3  [color=black,style=bold,label="((glucose_level>40))"];
	S8 -> S5  [color=black,style=bold,label="((glucose_level<300))"];
	S8 -> S7  [color=black,style=bold,label="(1)"];
	S3 -> S10  [color=black,style=bold,label="glucose_level = (glucose_level-10)"];
	S10 -> S11  [color=black,style=bold,label="sensor_data!glucose_level"];
	S5 -> S10  [color=black,style=bold,label="glucose_level = (glucose_level+20)"];
	S7 -> S10  [color=black,style=solid,label="(1)"];
}
digraph p_Controller {
size="8,10";
  GT [shape=box,style=dotted,label="Controller"];
  GT -> S10;
	S10 -> S8  [color=black,style=bold,label="sensor_data?current_level"];
	S8 -> S3  [color=black,style=solid,label="((current_level<70))"];
	S8 -> S5  [color=black,style=solid,label="((current_level>=200))"];
	S8 -> S7  [color=black,style=solid,label="else"];
	S3 -> S10  [color=black,style=bold,label="pump_cmd!0"];
	S5 -> S10  [color=black,style=bold,label="pump_cmd!1"];
	S7 -> S10  [color=black,style=bold,label="pump_cmd!0"];
}
digraph p_Pump {
size="8,10";
  GT [shape=box,style=dotted,label="Pump"];
  GT -> S16;
	S16 -> S14  [color=black,style=bold,label="pump_cmd?trigger"];
	S14 -> S7  [color=black,style=bold,label="((trigger&&(insulin_reservoir>0)))"];
	S14 -> S9  [color=black,style=bold,label="((trigger&&(insulin_reservoir==0)))"];
	S14 -> S12  [color=black,style=bold,label="(!(trigger))"];
	S7 -> S4  [color=black,style=dashed,label="pump_active = 1"];
	S4 -> S5  [color=black,style=dashed,label="insulin_reservoir = (insulin_reservoir-1)"];
	S5 -> S6  [color=black,style=dashed,label="glucose_level = (glucose_level-15)"];
	S6 -> S16  [color=black,style=bold,label="printf('ACTION: Insulin Delivered. Remaining: %d ',insulin_reservoir)"];
	S9 -> S10  [color=black,style=bold,label="alarm_triggered = 1"];
	S10 -> S16  [color=black,style=solid,label="printf('ALARM: Reservoir Empty! ')"];
	S12 -> S13  [color=black,style=bold,label="pump_active = 0"];
	S13 -> S16  [color=black,style=bold,label="printf('STATUS: Pump Idle. Glucose: %d ',glucose_level)"];
}
digraph claim_safety_check {
size="8,10";
  GT [shape=box,style=dotted,label="safety_check"];
  GT -> S6;
	S6 -> S2  [color=black,style=dashed,label="(!(!((pump_active&&(glucose_level<70)))))"];
	S6 -> S6  [color=black,style=bold,label="(1)"];
	S2 -> S6  [color=black,style=bold,label="assert(!(!(!((pump_active&&(glucose_level<70))))))"];
}
